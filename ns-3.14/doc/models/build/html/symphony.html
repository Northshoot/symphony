

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Symphony Module Documentation &mdash; Model Library</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     'ns-3-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Model Library" href="index.html" />
  <link rel="stylesheet" type="text/css"
    href="_static/ns3_stylesheet.css" />
    <link rel="icon" type="image/ico" 
      href="_static/favicon.ico" />

  <script type="text/javascript" src="_static/drop-down-menu.js"></script>
  <script type="text/javascript" src="_static/ns3_version.js"></script>
  <script type="text/javascript">var ns3_builder="html";</script>
  <script type="text/javascript" src="_static/ns3_links.js"></script>
      

  </head>
  <body>
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0" width="100%">
      <tbody>
	<tr style="height: 56px;">
	  <td id="projectlogo">
	    <a id="ns3_home1"
	       href="http://www.nsnam.org/">
	       <img alt="ns-3 Logo"
		    src="_static/ns-3-inverted-notext-small.png"/>
	    </a>
	  </td>
	  <td id="projecttext">
	    <div id="projectbrief">A Discrete-Event Network Simulator</div>
	      <span id="projectnumber"><script type="text/javascript">document.write(ns3_version)</script></span>
	  </td>
	      
	  <td id="ns3-menu">
	    <div class="menu">
	      <ul >
	        <li><a id="ns3_home2"
		       href="http://www.nsnam.org/"
		       >&nbsp;&nbsp;Home</a>
	        </li>
	        <li><span
		      onmouseover="mopen('mTuts')" 
		      onmouseout="mclosetime()"
			>Tutorials &nbsp;&#x25BC;</span>
		    <div id="mTuts" 
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_tut"
			 href="/docs/tutorial/html/index.html"
			  >English</a><br/>
		      <a id="ns3_ptbr"
			 href="/docs/tutorial-pt-br/html/index.html"
			    >Portuguese</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDocs')" 
		      onmouseout="mclosetime()"
			>Docs &nbsp;&nbsp;&nbsp;&#x25BC;</span>
		    <div id="mDocs"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_wiki"
			 href="http://www.nsnam.org/wiki"
			 >Wiki</a><br/>
		      <a id="ns3_man"
			 href="/docs/manual/html/index.html"
			 >Manual</a><br/>
		      <a id="ns3_mod"
			 href="/docs/models/html/index.html"
			 >Models</a><br/>
	        </li>
	        <li><span
		      onmouseover="mopen('mDev')" 
		      onmouseout="mclosetime()"
			>Develop &#x25BC;</span>
		    <div id="mDev"
		        onmouseover="mcancelclosetime()" 
		        onmouseout="mclosetime()">
		      <a id="ns3_api"
			 href="/docs/doxygen/html/index.html"
			 >API</a><br/>
		      <a id="ns3_bugs"
		       href="http://www.nsnam.org/bugzilla/">Bugs</a>
	        </li>
	      </ul>
	    </div>
	  </td>
	  <td id="projectsection">
	    <span style="margin-right:10px">Models</span>
	  </td>
	</tr>
      </tbody>
    </table>
    <script  type="text/javascript">ns3_write_links()</script>
  </div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="symphony-module-documentation">
<h1>Symphony Module Documentation<a class="headerlink" href="#symphony-module-documentation" title="Permalink to this headline">¶</a></h1>
<p>The introductory paragraph is for describing what this code is trying to
model.</p>
<div class="section" id="model-description">
<h2>Model Description<a class="headerlink" href="#model-description" title="Permalink to this headline">¶</a></h2>
<p>The source code for the new module lives in the directory <tt class="docutils literal"><span class="pre">src/symphony</span></tt>.</p>
<p>Models in symphony allows to run virtualized WSN OS, here is example of usage with
TinyOS.
Further, NodeModel contains models of hardware peripherals real behavior in time.
The model is prepared for monitoring memory, and energy consumptions.</p>
<div class="section" id="design">
<h3>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="scope-and-limitations">
<h3>Scope and Limitations<a class="headerlink" href="#scope-and-limitations" title="Permalink to this headline">¶</a></h3>
<p>Symphony is build to be a generic emulation platform for WSN OS. Example of implementing
OS for virtualization is given on TinyOS.</p>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>Add academic citations here, such as if you published a paper on this
model, or if readers should read a particular specification or other work.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-symphony">
<h3>Building Symphony<a class="headerlink" href="#building-symphony" title="Permalink to this headline">¶</a></h3>
<p>Install all needed tools for NS3, as well TinyOS
Install ns-3 <a class="reference external" href="http://shieldroute.blogspot.se/2012/08/install-and-run-ns3-on-amazons-ec2.html">http://shieldroute.blogspot.se/2012/08/install-and-run-ns3-on-amazons-ec2.html</a>
Install TinyOS <a class="reference external" href="http://shieldroute.blogspot.se/2012/08/tossim-simulations-on-amazon-aws.html">http://shieldroute.blogspot.se/2012/08/tossim-simulations-on-amazon-aws.html</a></p>
<p>Additionally install xml parser libxerces-c3.1
$sudo apt-get install libxerces-c3.1*</p>
<p>Then pach TinyOS
patching /usr/lib/ncc/nesc_nx.h:316
<a class="reference external" href="http://www.cyberciti.biz/faq/appy-patch-file-using-patch-command/">http://www.cyberciti.biz/faq/appy-patch-file-using-patch-command/</a>
sudo patch &lt; ../../helper/nesc_nx.h.symphony.patch</p>
<p>Additionally you will need to set following environment variables,
put them in your .bashrc file and remember to restart terminal</p>
<p>export PATH
SYMPHONY_NS_VERSION=&#8221;ns-3.14&#8221;
#only here you need to change
SYMPHONY_BASE=&#8221;/home/_path_/_to_/symphony&#8221;
SYMPHONY_BUILD=&#8221;$SYMPHONY_BASE/$SYMPHONY_NS_VERSION/build&#8221;
SYMPHONY_SRC=&#8221;$SYMPHONY_BASE/$SYMPHONY_NS_VERSION/src/symphony&#8221;
TOSROOT_SYMPHONY=&#8221;$SYMPHONY_BASE/tinyos-2.1.1&#8221;
TOSROOT=$TOSROOT_SYMPHONY
TOSDIR=&#8221;$TOSROOT/tos&#8221;
MAKERULES=&#8221;$TOSROOT/support/make/Makerules&#8221;
CLASSPATH=.:$TOSROOT/support/sdk/java:$TOSROOT/support/sdk/java/tinyos.jar:$CLASSPATH
PYTHONPATH=$PYTHONPATH:$TOSROOT/support/sdk/python
PYTHONPATH=$PYTHONPATH:$TOSROOT/support/sdk/python
export TOSROOT
export TOSDIR
export CLASSPATH
export MAKERULES
export PYTHONPATH
export SYMPHONY_NS_VERSION
export SYMPHONY_BASE
export SYMPHONY_BUILD
export TOSROOT_SYMPHONY
export SYMPHONY_SRC
LD_LIBRARY_PATH=/usr/lib:$SYMPHONY_BUILD:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH
PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/lib/pkgcofig
export PKG_CONFIG_PATH</p>
<p>Configure just symphony
./waf &#8211;disable-python &#8211;disable-tests &#8211;enable-modules=&#8217;symphony&#8217; configure</p>
<p>and build it
./waf build</p>
</div>
<div class="section" id="creating-tinyos-applications">
<h3>Creating TinyOS Applications<a class="headerlink" href="#creating-tinyos-applications" title="Permalink to this headline">¶</a></h3>
<p>If you have set up your environment properly and have run example applications successfully,
Then you can create your TinyOS application any were. Just copy the Makefile and symphony.xml to
the same folder were you have your app.
Make sure that the variable TOS_APP in Makefile, have the name of your application.
The Make will build library and copy needed files to ns-3.xx/build directory.</p>
<p>You will also need to create the ns-3 simulation scenario. See examples, for that.
Generally you set up the simulation same way as for wifi app. Expect that you do not need to create
IP/TCP stack nor application in it, since it is done in your TinyOS app.</p>
</div>
<div class="section" id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h3>
<p>Most common helpers
TosNodeContainer - given number of nodes creates and stores TosNodes
TosHelper - used to create channel, phy layer, set nodes model, and created
TosNetDeviceContainer - creates raw connections for communication between TinyOS
radio and underlying physical/channel.
SymphonySensorContainer - creates a container for the sensors, and connects raw
readings between OS and sensor model.</p>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>What classes hold attributes, and what are the key ones worth mentioning?</p>
</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p>Logging is done in your application as you would do with deploying the system.</p>
</div>
<div class="section" id="advanced-usage">
<h3>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h3>
<p>For debugging within TinyOS you can use __PRETTY_FUNCTION__ variable in order to
get function name variable.</p>
<p>printf(&#8220;%sn&#8221;,__PRETTY_FUNCTION__);</p>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>blink/
gateway/
memory/
sensor/
tos/
tos-hidden-terminal/
time/</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>Make sure you have installed needed components and exporter variables.</p>
</div>
</div>
<div class="section" id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>Symphony is tested to work under Ubuntu 11.x, 12.x.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Symphony Module Documentation</a><ul>
<li><a class="reference internal" href="#model-description">Model Description</a><ul>
<li><a class="reference internal" href="#design">Design</a></li>
<li><a class="reference internal" href="#scope-and-limitations">Scope and Limitations</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#building-symphony">Building Symphony</a></li>
<li><a class="reference internal" href="#creating-tinyos-applications">Creating TinyOS Applications</a></li>
<li><a class="reference internal" href="#helpers">Helpers</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#advanced-usage">Advanced Usage</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validation">Validation</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/symphony.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
    <li class="navelem"><a href="">ns-3</a><span class="navelem">&nbsp;</span></li>
    
        <li><a href="index.html">Models</a><span class="navelem">&nbsp;</span></li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, ns-3 project.
      Last updated on Oct 17, 2012 10:56.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>